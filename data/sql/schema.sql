CREATE TABLE building (buil_cd_key INT AUTO_INCREMENT, buil_nm_name VARCHAR(40) NOT NULL, PRIMARY KEY(buil_cd_key)) ENGINE = INNODB;
CREATE TABLE crowd (crow_cd_key INT AUTO_INCREMENT, time_cd_key INT NOT NULL, subj_cd_key INT NOT NULL, teac_cd_key INT NOT NULL, crow_nm_name VARCHAR(40) NOT NULL, INDEX time_cd_key_idx (time_cd_key), INDEX subj_cd_key_idx (subj_cd_key), INDEX teac_cd_key_idx (teac_cd_key), PRIMARY KEY(crow_cd_key)) ENGINE = INNODB;
CREATE TABLE crowd_room (crro_cd_key INT AUTO_INCREMENT, crow_cd_key INT NOT NULL, room_cd_key INT NOT NULL, crrs_cd_key INT NOT NULL, INDEX crrs_cd_key_idx (crrs_cd_key), INDEX room_cd_key_idx (room_cd_key), INDEX crow_cd_key_idx (crow_cd_key), PRIMARY KEY(crro_cd_key)) ENGINE = INNODB;
CREATE TABLE crowd_room_status (crrs_cd_key INT AUTO_INCREMENT, crrs_nm_name VARCHAR(40) NOT NULL, PRIMARY KEY(crrs_cd_key)) ENGINE = INNODB;
CREATE TABLE employee (empl_cd_key INT AUTO_INCREMENT, empl_nm_name VARCHAR(40) NOT NULL, PRIMARY KEY(empl_cd_key)) ENGINE = INNODB;
CREATE TABLE room (room_cd_key INT AUTO_INCREMENT, buil_cd_key INT NOT NULL, INDEX buil_cd_key_idx (buil_cd_key), PRIMARY KEY(room_cd_key)) ENGINE = INNODB;
CREATE TABLE subject (subj_cd_key INT AUTO_INCREMENT, subj_nm_name VARCHAR(40) NOT NULL, PRIMARY KEY(subj_cd_key)) ENGINE = INNODB;
CREATE TABLE teacher (teac_cd_key INT AUTO_INCREMENT, teac_nm_name VARCHAR(40) NOT NULL, PRIMARY KEY(teac_cd_key)) ENGINE = INNODB;
CREATE TABLE timetable (time_cd_key INT AUTO_INCREMENT, time_dt_time DATE NOT NULL, PRIMARY KEY(time_cd_key)) ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE crowd ADD CONSTRAINT crowd_time_cd_key_timetable_time_cd_key FOREIGN KEY (time_cd_key) REFERENCES timetable(time_cd_key);
ALTER TABLE crowd ADD CONSTRAINT crowd_teac_cd_key_teacher_teac_cd_key FOREIGN KEY (teac_cd_key) REFERENCES teacher(teac_cd_key);
ALTER TABLE crowd ADD CONSTRAINT crowd_subj_cd_key_subject_subj_cd_key FOREIGN KEY (subj_cd_key) REFERENCES subject(subj_cd_key);
ALTER TABLE crowd_room ADD CONSTRAINT crowd_room_room_cd_key_room_room_cd_key FOREIGN KEY (room_cd_key) REFERENCES room(room_cd_key);
ALTER TABLE crowd_room ADD CONSTRAINT crowd_room_crrs_cd_key_crowd_room_status_crrs_cd_key FOREIGN KEY (crrs_cd_key) REFERENCES crowd_room_status(crrs_cd_key);
ALTER TABLE crowd_room ADD CONSTRAINT crowd_room_crow_cd_key_crowd_crow_cd_key FOREIGN KEY (crow_cd_key) REFERENCES crowd(crow_cd_key);
ALTER TABLE room ADD CONSTRAINT room_buil_cd_key_building_buil_cd_key FOREIGN KEY (buil_cd_key) REFERENCES building(buil_cd_key);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
